{"version":3,"sources":["visualizer.js"],"names":["Visualizer","renderBinaryVisualization","binary","containerId","container","document","getElementById","html","createBinaryRow","ip","decimal","networkBits","mask","network","innerHTML","label","binaryOctets","bitPosition","forEach","octet","octetIndex","i","bit","isNetworkBit","className","bitPositionInOctet","decimalValue","Math","pow","contribution","tooltip","renderSubnetTree","subnets","basePrefix","newPrefix","length","networkAddress","usableHosts","nodeWidth","nodeHeight","levelHeight","horizontalSpacing","minHorizontalSpacing","cols","min","ceil","sqrt","rows","totalWidth","max","svgHeight","svgWidth","svg","rootX","rootY","drawTreeNode","split","slice","join","startY","gridWidth","startX","subnet","index","col","row","floor","x","y","midY","address","prefix","width","height","number","isRoot","rectX","fillColor","strokeColor","renderAddressSpaceMap","barHeight","barSpacing","leftMargin","rightMargin","availableWidth","lastSubnet","maxAddress","SubnetEngine","ipToInt","broadcastAddress","minAddress","range","networkInt","broadcastInt","firstUsableInt","firstUsable","lastUsableInt","lastUsable","totalAddresses","networkWidth","broadcastWidth","usableWidth","colorCodeIP","type","colors","broadcast","usable","compareSubnets","subnet1","subnet2","subnetNumber","clearVisualizations","containers","id","window"],"mappings":"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","sourcesContent":["/**\r\n * ============================================\r\n * Visualizer Module\r\n * ============================================\r\n * Creates visual representations of subnetting:\r\n * - Binary visualization with color coding\r\n * - Subnet tree structure\r\n * - Address space timeline map\r\n * All using pure SVG (no external libraries)\r\n * ============================================\r\n */\r\n\r\nconst Visualizer = (function() {\r\n    'use strict';\r\n\r\n    /**\r\n     * Generates binary visualization for IP, mask, and network\r\n     * @param {Object} binary - Binary breakdown from SubnetEngine\r\n     * @param {string} containerId - Container element ID\r\n     */\r\n    function renderBinaryVisualization(binary, containerId) {\r\n        const container = document.getElementById(containerId);\r\n        if (!container) return;\r\n\r\n        let html = '';\r\n\r\n        // IP Address Binary\r\n        html += createBinaryRow('IP Address', binary.ip.decimal, binary.ip.binary, binary.networkBits);\r\n        \r\n        // Subnet Mask Binary\r\n        html += createBinaryRow('Subnet Mask', binary.mask.decimal, binary.mask.binary, binary.networkBits);\r\n        \r\n        // Network Address Binary\r\n        html += createBinaryRow('Network Address', binary.network.decimal, binary.network.binary, binary.networkBits);\r\n\r\n        container.innerHTML = html;\r\n    }\r\n\r\n    /**\r\n     * Creates a single binary row with color-coded bits\r\n     * @param {string} label - Row label\r\n     * @param {string} decimal - Decimal representation\r\n     * @param {Array} binaryOctets - Array of 4 binary strings\r\n     * @param {number} networkBits - Number of network bits\r\n     * @returns {string} - HTML string\r\n     */\r\n    function createBinaryRow(label, decimal, binaryOctets, networkBits) {\r\n        let html = '<div class=\"binary-row\">';\r\n        html += `<div class=\"binary-label\">${label}: ${decimal}</div>`;\r\n        html += '<div class=\"binary-octets\">';\r\n\r\n        let bitPosition = 0;\r\n        \r\n        binaryOctets.forEach((octet, octetIndex) => {\r\n            html += '<div class=\"binary-octet\">';\r\n            \r\n            for (let i = 0; i < 8; i++) {\r\n                const bit = octet[i];\r\n                const isNetworkBit = bitPosition < networkBits;\r\n                const className = isNetworkBit ? 'network' : 'host';\r\n                \r\n                // Calculate decimal value of this bit position (128, 64, 32, 16, 8, 4, 2, 1)\r\n                const bitPositionInOctet = i;\r\n                const decimalValue = Math.pow(2, 7 - bitPositionInOctet);\r\n                const contribution = bit === '1' ? decimalValue : 0;\r\n                \r\n                // Create detailed tooltip\r\n                const tooltip = `Position ${bitPosition + 1} (Bit ${bitPositionInOctet})\\n` +\r\n                              `Value: ${bit}\\n` +\r\n                              `Decimal: ${decimalValue}\\n` +\r\n                              `Contributes: ${contribution}\\n` +\r\n                              `Type: ${isNetworkBit ? 'Network' : 'Host'} bit`;\r\n                \r\n                html += `<div class=\"binary-bit ${className}\" title=\"${tooltip}\" data-value=\"${decimalValue}\" data-contributes=\"${contribution}\">${bit}</div>`;\r\n                bitPosition++;\r\n            }\r\n            \r\n            html += '</div>';\r\n        });\r\n\r\n        html += '</div></div>';\r\n        return html;\r\n    }\r\n\r\n    /**\r\n     * Generates subnet tree visualization\r\n     * @param {Array} subnets - Array of subnet objects\r\n     * @param {number} basePrefix - Base prefix length\r\n     * @param {number} newPrefix - New prefix length\r\n     * @param {string} containerId - Container element ID\r\n     */\r\n    function renderSubnetTree(subnets, basePrefix, newPrefix, containerId) {\r\n        const container = document.getElementById(containerId);\r\n        if (!container) return;\r\n\r\n        // If no splitting, show simple single node\r\n        if (!newPrefix || newPrefix === basePrefix || subnets.length === 1) {\r\n            container.innerHTML = `\r\n                <svg width=\"400\" height=\"200\" viewBox=\"0 0 400 200\">\r\n                    <defs>\r\n                        <linearGradient id=\"singleNodeGrad\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"100%\">\r\n                            <stop offset=\"0%\" style=\"stop-color:var(--color-primary);stop-opacity:1\" />\r\n                            <stop offset=\"100%\" style=\"stop-color:var(--color-secondary);stop-opacity:1\" />\r\n                        </linearGradient>\r\n                    </defs>\r\n                    <rect x=\"100\" y=\"70\" width=\"200\" height=\"70\" rx=\"12\" class=\"tree-node-single\" fill=\"url(#singleNodeGrad)\" />\r\n                    <text x=\"200\" y=\"95\" text-anchor=\"middle\" class=\"tree-text-main\" style=\"fill: white; font-size: 14px; font-weight: 700;\">${subnets[0].networkAddress}</text>\r\n                    <text x=\"200\" y=\"115\" text-anchor=\"middle\" class=\"tree-text-main\" style=\"fill: white; font-size: 13px;\">/${basePrefix}</text>\r\n                    <text x=\"200\" y=\"132\" text-anchor=\"middle\" class=\"tree-text-main\" style=\"fill: rgba(255,255,255,0.8); font-size: 10px;\">${subnets[0].usableHosts} hosts</text>\r\n                </svg>\r\n            `;\r\n            return;\r\n        }\r\n\r\n        // Calculate tree dimensions with improved spacing\r\n        const nodeWidth = 160;\r\n        const nodeHeight = 70;\r\n        const levelHeight = 140;\r\n        const horizontalSpacing = 30;\r\n        const minHorizontalSpacing = 15;\r\n\r\n        // Better grid calculation\r\n        const cols = Math.min(8, Math.ceil(Math.sqrt(subnets.length * 1.5)));\r\n        const rows = Math.ceil(subnets.length / cols);\r\n        \r\n        const totalWidth = Math.max(cols * (nodeWidth + horizontalSpacing), 1000);\r\n        const svgHeight = levelHeight + rows * (nodeHeight + 80) + 50;\r\n        const svgWidth = totalWidth + 100;\r\n\r\n        let svg = `<svg width=\"100%\" height=\"${svgHeight}\" viewBox=\"0 0 ${svgWidth} ${svgHeight}\">`;\r\n        \r\n        // Add gradient definitions\r\n        svg += `\r\n            <defs>\r\n                <linearGradient id=\"rootGrad\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"100%\">\r\n                    <stop offset=\"0%\" style=\"stop-color:#8b5cf6;stop-opacity:1\" />\r\n                    <stop offset=\"100%\" style=\"stop-color:#3b82f6;stop-opacity:1\" />\r\n                </linearGradient>\r\n                <linearGradient id=\"childGrad\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"100%\">\r\n                    <stop offset=\"0%\" style=\"stop-color:#3b82f6;stop-opacity:1\" />\r\n                    <stop offset=\"100%\" style=\"stop-color:#06b6d4;stop-opacity:1\" />\r\n                </linearGradient>\r\n                <filter id=\"shadow\">\r\n                    <feDropShadow dx=\"0\" dy=\"4\" stdDeviation=\"4\" flood-opacity=\"0.3\"/>\r\n                </filter>\r\n            </defs>\r\n        `;\r\n\r\n        // Draw root node (base network)\r\n        const rootX = svgWidth / 2;\r\n        const rootY = 40;\r\n        svg += drawTreeNode(subnets[0].networkAddress.split('.').slice(0, 3).join('.') + '.0', basePrefix, rootX, rootY, nodeWidth + 20, nodeHeight, null, true);\r\n\r\n        // Draw child nodes (subnets) with better layout\r\n        const startY = rootY + levelHeight;\r\n        const gridWidth = cols * (nodeWidth + horizontalSpacing);\r\n        const startX = (svgWidth - gridWidth) / 2 + nodeWidth / 2;\r\n\r\n        subnets.forEach((subnet, index) => {\r\n            const col = index % cols;\r\n            const row = Math.floor(index / cols);\r\n            const x = startX + col * (nodeWidth + horizontalSpacing);\r\n            const y = startY + row * (nodeHeight + 80);\r\n\r\n            // Draw curved line from root to child\r\n            const midY = (rootY + nodeHeight + y) / 2;\r\n            svg += `<path d=\"M ${rootX} ${rootY + nodeHeight} Q ${rootX} ${midY}, ${x} ${y}\" class=\"tree-link\" />`;\r\n\r\n            // Draw child node\r\n            svg += drawTreeNode(subnet.networkAddress, newPrefix, x, y, nodeWidth, nodeHeight, index + 1, false);\r\n        });\r\n\r\n        svg += '</svg>';\r\n        container.innerHTML = svg;\r\n    }\r\n\r\n    /**\r\n     * Draws a single tree node\r\n     * @param {string} address - IP address\r\n     * @param {number} prefix - Prefix length\r\n     * @param {number} x - X coordinate (center)\r\n     * @param {number} y - Y coordinate (top)\r\n     * @param {number} width - Node width\r\n     * @param {number} height - Node height\r\n     * @param {number} number - Subnet number (optional)\r\n     * @param {boolean} isRoot - Is this the root node\r\n     * @returns {string} - SVG string\r\n     */\r\n    function drawTreeNode(address, prefix, x, y, width, height, number = null, isRoot = false) {\r\n        const rectX = x - width / 2;\r\n        const fillColor = isRoot ? 'url(#rootGrad)' : 'url(#childGrad)';\r\n        const strokeColor = isRoot ? '#8b5cf6' : '#3b82f6';\r\n        \r\n        let svg = `<rect x=\"${rectX}\" y=\"${y}\" width=\"${width}\" height=\"${height}\" rx=\"12\" \r\n                   class=\"tree-node\" fill=\"${fillColor}\" stroke=\"${strokeColor}\" \r\n                   stroke-width=\"3\" filter=\"url(#shadow)\" />`;\r\n        \r\n        if (number) {\r\n            // Child node with number\r\n            svg += `<rect x=\"${rectX + 5}\" y=\"${y + 5}\" width=\"30\" height=\"20\" rx=\"4\" fill=\"rgba(255,255,255,0.2)\" />`;\r\n            svg += `<text x=\"${rectX + 20}\" y=\"${y + 18}\" text-anchor=\"middle\" class=\"tree-text\" style=\"font-size: 11px; fill: white; font-weight: 700;\">#${number}</text>`;\r\n            svg += `<text x=\"${x}\" y=\"${y + 38}\" text-anchor=\"middle\" class=\"tree-text\" style=\"font-size: 13px; fill: white; font-weight: 700;\">${address}</text>`;\r\n            svg += `<text x=\"${x}\" y=\"${y + 55}\" text-anchor=\"middle\" class=\"tree-text\" style=\"font-size: 12px; fill: rgba(255,255,255,0.9);\">/${prefix}</text>`;\r\n        } else {\r\n            // Root node\r\n            svg += `<text x=\"${x}\" y=\"${y + 20}\" text-anchor=\"middle\" class=\"tree-text\" style=\"font-size: 11px; fill: rgba(255,255,255,0.8); font-weight: 600;\">BASE NETWORK</text>`;\r\n            svg += `<text x=\"${x}\" y=\"${y + 38}\" text-anchor=\"middle\" class=\"tree-text\" style=\"font-size: 14px; fill: white; font-weight: 700;\">${address}</text>`;\r\n            svg += `<text x=\"${x}\" y=\"${y + 55}\" text-anchor=\"middle\" class=\"tree-text\" style=\"font-size: 13px; fill: rgba(255,255,255,0.9);\">/${prefix}</text>`;\r\n        }\r\n        \r\n        return svg;\r\n    }\r\n\r\n    /**\r\n     * Generates address space map visualization\r\n     * @param {Array} subnets - Array of subnet objects\r\n     * @param {string} containerId - Container element ID\r\n     */\r\n    function renderAddressSpaceMap(subnets, containerId) {\r\n        const container = document.getElementById(containerId);\r\n        if (!container) return;\r\n\r\n        if (subnets.length === 0) {\r\n            container.innerHTML = '<p>No subnets to display</p>';\r\n            return;\r\n        }\r\n\r\n        const svgHeight = Math.max(200, subnets.length * 60 + 40);\r\n        const svgWidth = 800;\r\n        const barHeight = 40;\r\n        const barSpacing = 20;\r\n        const leftMargin = 50;\r\n        const rightMargin = 50;\r\n        const availableWidth = svgWidth - leftMargin - rightMargin;\r\n\r\n        // Calculate max address for scaling\r\n        const lastSubnet = subnets[subnets.length - 1];\r\n        const maxAddress = SubnetEngine.ipToInt(lastSubnet.broadcastAddress);\r\n        const minAddress = SubnetEngine.ipToInt(subnets[0].networkAddress);\r\n        const range = maxAddress - minAddress + 1;\r\n\r\n        let svg = `<svg width=\"100%\" height=\"${svgHeight}\" viewBox=\"0 0 ${svgWidth} ${svgHeight}\">`;\r\n\r\n        subnets.forEach((subnet, index) => {\r\n            const y = 20 + index * (barHeight + barSpacing);\r\n            \r\n            // Calculate positions\r\n            const networkInt = SubnetEngine.ipToInt(subnet.networkAddress);\r\n            const broadcastInt = SubnetEngine.ipToInt(subnet.broadcastAddress);\r\n            const firstUsableInt = SubnetEngine.ipToInt(subnet.firstUsable);\r\n            const lastUsableInt = SubnetEngine.ipToInt(subnet.lastUsable);\r\n\r\n            // Calculate widths proportionally\r\n            const totalWidth = availableWidth * (subnet.totalAddresses / range);\r\n            const networkWidth = 3; // Fixed small width for network\r\n            const broadcastWidth = 3; // Fixed small width for broadcast\r\n            const usableWidth = totalWidth - networkWidth - broadcastWidth;\r\n\r\n            const startX = leftMargin;\r\n\r\n            // Draw network address (blue)\r\n            svg += `<rect x=\"${startX}\" y=\"${y}\" width=\"${networkWidth}\" height=\"${barHeight}\" \r\n                    fill=\"var(--color-network)\" rx=\"2\" />`;\r\n\r\n            // Draw usable range (green)\r\n            svg += `<rect x=\"${startX + networkWidth}\" y=\"${y}\" width=\"${usableWidth}\" height=\"${barHeight}\" \r\n                    fill=\"var(--color-usable)\" rx=\"2\" />`;\r\n\r\n            // Draw broadcast address (red)\r\n            svg += `<rect x=\"${startX + networkWidth + usableWidth}\" y=\"${y}\" width=\"${broadcastWidth}\" height=\"${barHeight}\" \r\n                    fill=\"var(--color-broadcast)\" rx=\"2\" />`;\r\n\r\n            // Add border\r\n            svg += `<rect x=\"${startX}\" y=\"${y}\" width=\"${totalWidth}\" height=\"${barHeight}\" \r\n                    fill=\"none\" stroke=\"var(--border-color)\" stroke-width=\"2\" rx=\"2\" />`;\r\n\r\n            // Add labels\r\n            svg += `<text x=\"${startX + totalWidth + 10}\" y=\"${y + barHeight / 2}\" \r\n                    alignment-baseline=\"middle\" class=\"tree-text\" style=\"font-size: 12px;\">\r\n                    Subnet ${index + 1}: ${subnet.networkAddress}/${subnet.prefix}\r\n                    </text>`;\r\n\r\n            // Add hover tooltip (simplified)\r\n            svg += `<title>Subnet ${index + 1}\r\nNetwork: ${subnet.networkAddress}\r\nUsable: ${subnet.firstUsable} - ${subnet.lastUsable}\r\nBroadcast: ${subnet.broadcastAddress}\r\nHosts: ${subnet.usableHosts}</title>`;\r\n        });\r\n\r\n        svg += '</svg>';\r\n        container.innerHTML = svg;\r\n    }\r\n\r\n    /**\r\n     * Generates a color-coded IP address display\r\n     * @param {string} ip - IP address\r\n     * @param {string} type - Type: 'network', 'broadcast', 'usable'\r\n     * @returns {string} - HTML string with color coding\r\n     */\r\n    function colorCodeIP(ip, type) {\r\n        const colors = {\r\n            network: 'var(--color-network)',\r\n            broadcast: 'var(--color-broadcast)',\r\n            usable: 'var(--color-usable)'\r\n        };\r\n        \r\n        return `<span style=\"color: ${colors[type] || 'inherit'}; font-weight: 600;\">${ip}</span>`;\r\n    }\r\n\r\n    /**\r\n     * Creates a visual comparison of two subnets\r\n     * @param {Object} subnet1 - First subnet\r\n     * @param {Object} subnet2 - Second subnet\r\n     * @returns {string} - HTML comparison\r\n     */\r\n    function compareSubnets(subnet1, subnet2) {\r\n        return `\r\n            <div class=\"subnet-comparison\">\r\n                <div class=\"comparison-column\">\r\n                    <h4>Subnet ${subnet1.subnetNumber}</h4>\r\n                    <p>Network: ${colorCodeIP(subnet1.networkAddress, 'network')}</p>\r\n                    <p>Broadcast: ${colorCodeIP(subnet1.broadcastAddress, 'broadcast')}</p>\r\n                    <p>Hosts: ${subnet1.usableHosts}</p>\r\n                </div>\r\n                <div class=\"comparison-column\">\r\n                    <h4>Subnet ${subnet2.subnetNumber}</h4>\r\n                    <p>Network: ${colorCodeIP(subnet2.networkAddress, 'network')}</p>\r\n                    <p>Broadcast: ${colorCodeIP(subnet2.broadcastAddress, 'broadcast')}</p>\r\n                    <p>Hosts: ${subnet2.usableHosts}</p>\r\n                </div>\r\n            </div>\r\n        `;\r\n    }\r\n\r\n    /**\r\n     * Clears all visualizations\r\n     */\r\n    function clearVisualizations() {\r\n        const containers = ['binaryVisualization', 'subnetTree', 'addressMap'];\r\n        containers.forEach(id => {\r\n            const container = document.getElementById(id);\r\n            if (container) {\r\n                container.innerHTML = '';\r\n            }\r\n        });\r\n    }\r\n\r\n    // Public API\r\n    return {\r\n        renderBinaryVisualization,\r\n        renderSubnetTree,\r\n        renderAddressSpaceMap,\r\n        colorCodeIP,\r\n        compareSubnets,\r\n        clearVisualizations\r\n    };\r\n})();\r\n\r\n// Make available globally\r\nwindow.Visualizer = Visualizer;\r\n"],"file":"visualizer.dev.js"}