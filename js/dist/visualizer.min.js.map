{"version":3,"sources":["visualizer.js"],"names":["Visualizer","html","createBinaryRow","label","decimal","binaryOctets","networkBits","bitPosition","octetIndex","isNetworkBit","className","bitPositionInOctet","i","decimalValue","Math","pow","contribution","bit","tooltip","concat","container","minAddress","SubnetEngine","ipToInt","subnets","width","networkAddress","arguments","length","undefined","isRoot","rectX","maxAddress","fillColor","svgHeight","forEach","svg","y","height","subnet","strokeColor","lastUsableInt","totalWidth","availableWidth","totalAddresses","networkWidth","number","x","address","broadcastWidth","prefix","startX","colorCodeIP","ip","type","network","broadcast","usable","renderBinaryVisualization","binary","containerId","innerHTML","renderSubnetTree","basePrefix","newPrefix","horizontalSpacing","document","getElementById","minHorizontalSpacing","rows","startY","nodeHeight","cols","min","ceil","sqrt","svgWidth","max","rootX","drawTreeNode","slice","join","nodeWidth","index","col","row","floor","rootY","midY","renderAddressSpaceMap","usableHosts","lastSubnet","colors","range","broadcastAddress","firstUsable","lastUsable","usableWidth","barHeight","compareSubnets","subnet1","subnet2","subnetNumber","clearVisualizations","id","window"],"mappings":"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","file":"visualizer.min.js","sourcesContent":["/**\r\n * ============================================\r\n * Visualizer Module\r\n * ============================================\r\n * Creates visual representations of subnetting:\r\n * - Binary visualization with color coding\r\n * - Subnet tree structure\r\n * - Address space timeline map\r\n * All using pure SVG (no external libraries)\r\n * ============================================\r\n */\r\n\r\nconst Visualizer = (function() {\r\n    'use strict';\r\n\r\n    /**\r\n     * Generates binary visualization for IP, mask, and network\r\n     * @param {Object} binary - Binary breakdown from SubnetEngine\r\n     * @param {string} containerId - Container element ID\r\n     */\r\n    function renderBinaryVisualization(binary, containerId) {\r\n        const container = document.getElementById(containerId);\r\n        if (!container) return;\r\n\r\n        let html = '';\r\n\r\n        // IP Address Binary\r\n        html += createBinaryRow('IP Address', binary.ip.decimal, binary.ip.binary, binary.networkBits);\r\n        \r\n        // Subnet Mask Binary\r\n        html += createBinaryRow('Subnet Mask', binary.mask.decimal, binary.mask.binary, binary.networkBits);\r\n        \r\n        // Network Address Binary\r\n        html += createBinaryRow('Network Address', binary.network.decimal, binary.network.binary, binary.networkBits);\r\n\r\n        container.innerHTML = html;\r\n    }\r\n\r\n    /**\r\n     * Creates a single binary row with color-coded bits\r\n     * @param {string} label - Row label\r\n     * @param {string} decimal - Decimal representation\r\n     * @param {Array} binaryOctets - Array of 4 binary strings\r\n     * @param {number} networkBits - Number of network bits\r\n     * @returns {string} - HTML string\r\n     */\r\n    function createBinaryRow(label, decimal, binaryOctets, networkBits) {\r\n        let html = '<div class=\"binary-row\">';\r\n        html += `<div class=\"binary-label\">${label}: ${decimal}</div>`;\r\n        html += '<div class=\"binary-octets\">';\r\n\r\n        let bitPosition = 0;\r\n        \r\n        binaryOctets.forEach((octet, octetIndex) => {\r\n            html += '<div class=\"binary-octet\">';\r\n            \r\n            for (let i = 0; i < 8; i++) {\r\n                const bit = octet[i];\r\n                const isNetworkBit = bitPosition < networkBits;\r\n                const className = isNetworkBit ? 'network' : 'host';\r\n                \r\n                // Calculate decimal value of this bit position (128, 64, 32, 16, 8, 4, 2, 1)\r\n                const bitPositionInOctet = i;\r\n                const decimalValue = Math.pow(2, 7 - bitPositionInOctet);\r\n                const contribution = bit === '1' ? decimalValue : 0;\r\n                \r\n                // Create detailed tooltip\r\n                const tooltip = `Position ${bitPosition + 1} (Bit ${bitPositionInOctet})\\n` +\r\n                              `Value: ${bit}\\n` +\r\n                              `Decimal: ${decimalValue}\\n` +\r\n                              `Contributes: ${contribution}\\n` +\r\n                              `Type: ${isNetworkBit ? 'Network' : 'Host'} bit`;\r\n                \r\n                html += `<div class=\"binary-bit ${className}\" title=\"${tooltip}\" data-value=\"${decimalValue}\" data-contributes=\"${contribution}\">${bit}</div>`;\r\n                bitPosition++;\r\n            }\r\n            \r\n            html += '</div>';\r\n        });\r\n\r\n        html += '</div></div>';\r\n        return html;\r\n    }\r\n\r\n    /**\r\n     * Generates subnet tree visualization\r\n     * @param {Array} subnets - Array of subnet objects\r\n     * @param {number} basePrefix - Base prefix length\r\n     * @param {number} newPrefix - New prefix length\r\n     * @param {string} containerId - Container element ID\r\n     */\r\n    function renderSubnetTree(subnets, basePrefix, newPrefix, containerId) {\r\n        const container = document.getElementById(containerId);\r\n        if (!container) return;\r\n\r\n        // If no splitting, show simple single node\r\n        if (!newPrefix || newPrefix === basePrefix || subnets.length === 1) {\r\n            container.innerHTML = `\r\n                <svg width=\"400\" height=\"200\" viewBox=\"0 0 400 200\">\r\n                    <defs>\r\n                        <linearGradient id=\"singleNodeGrad\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"100%\">\r\n                            <stop offset=\"0%\" style=\"stop-color:var(--color-primary);stop-opacity:1\" />\r\n                            <stop offset=\"100%\" style=\"stop-color:var(--color-secondary);stop-opacity:1\" />\r\n                        </linearGradient>\r\n                    </defs>\r\n                    <rect x=\"100\" y=\"70\" width=\"200\" height=\"70\" rx=\"12\" class=\"tree-node-single\" fill=\"url(#singleNodeGrad)\" />\r\n                    <text x=\"200\" y=\"95\" text-anchor=\"middle\" class=\"tree-text-main\" style=\"fill: white; font-size: 14px; font-weight: 700;\">${subnets[0].networkAddress}</text>\r\n                    <text x=\"200\" y=\"115\" text-anchor=\"middle\" class=\"tree-text-main\" style=\"fill: white; font-size: 13px;\">/${basePrefix}</text>\r\n                    <text x=\"200\" y=\"132\" text-anchor=\"middle\" class=\"tree-text-main\" style=\"fill: rgba(255,255,255,0.8); font-size: 10px;\">${subnets[0].usableHosts} hosts</text>\r\n                </svg>\r\n            `;\r\n            return;\r\n        }\r\n\r\n        // Calculate tree dimensions with improved spacing\r\n        const nodeWidth = 160;\r\n        const nodeHeight = 70;\r\n        const levelHeight = 140;\r\n        const horizontalSpacing = 30;\r\n        const minHorizontalSpacing = 15;\r\n\r\n        // Better grid calculation\r\n        const cols = Math.min(8, Math.ceil(Math.sqrt(subnets.length * 1.5)));\r\n        const rows = Math.ceil(subnets.length / cols);\r\n        \r\n        const totalWidth = Math.max(cols * (nodeWidth + horizontalSpacing), 1000);\r\n        const svgHeight = levelHeight + rows * (nodeHeight + 80) + 50;\r\n        const svgWidth = totalWidth + 100;\r\n\r\n        let svg = `<svg width=\"100%\" height=\"${svgHeight}\" viewBox=\"0 0 ${svgWidth} ${svgHeight}\">`;\r\n        \r\n        // Add gradient definitions\r\n        svg += `\r\n            <defs>\r\n                <linearGradient id=\"rootGrad\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"100%\">\r\n                    <stop offset=\"0%\" style=\"stop-color:#8b5cf6;stop-opacity:1\" />\r\n                    <stop offset=\"100%\" style=\"stop-color:#3b82f6;stop-opacity:1\" />\r\n                </linearGradient>\r\n                <linearGradient id=\"childGrad\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"100%\">\r\n                    <stop offset=\"0%\" style=\"stop-color:#3b82f6;stop-opacity:1\" />\r\n                    <stop offset=\"100%\" style=\"stop-color:#06b6d4;stop-opacity:1\" />\r\n                </linearGradient>\r\n                <filter id=\"shadow\">\r\n                    <feDropShadow dx=\"0\" dy=\"4\" stdDeviation=\"4\" flood-opacity=\"0.3\"/>\r\n                </filter>\r\n            </defs>\r\n        `;\r\n\r\n        // Draw root node (base network)\r\n        const rootX = svgWidth / 2;\r\n        const rootY = 40;\r\n        svg += drawTreeNode(subnets[0].networkAddress.split('.').slice(0, 3).join('.') + '.0', basePrefix, rootX, rootY, nodeWidth + 20, nodeHeight, null, true);\r\n\r\n        // Draw child nodes (subnets) with better layout\r\n        const startY = rootY + levelHeight;\r\n        const gridWidth = cols * (nodeWidth + horizontalSpacing);\r\n        const startX = (svgWidth - gridWidth) / 2 + nodeWidth / 2;\r\n\r\n        subnets.forEach((subnet, index) => {\r\n            const col = index % cols;\r\n            const row = Math.floor(index / cols);\r\n            const x = startX + col * (nodeWidth + horizontalSpacing);\r\n            const y = startY + row * (nodeHeight + 80);\r\n\r\n            // Draw curved line from root to child\r\n            const midY = (rootY + nodeHeight + y) / 2;\r\n            svg += `<path d=\"M ${rootX} ${rootY + nodeHeight} Q ${rootX} ${midY}, ${x} ${y}\" class=\"tree-link\" />`;\r\n\r\n            // Draw child node\r\n            svg += drawTreeNode(subnet.networkAddress, newPrefix, x, y, nodeWidth, nodeHeight, index + 1, false);\r\n        });\r\n\r\n        svg += '</svg>';\r\n        container.innerHTML = svg;\r\n    }\r\n\r\n    /**\r\n     * Draws a single tree node\r\n     * @param {string} address - IP address\r\n     * @param {number} prefix - Prefix length\r\n     * @param {number} x - X coordinate (center)\r\n     * @param {number} y - Y coordinate (top)\r\n     * @param {number} width - Node width\r\n     * @param {number} height - Node height\r\n     * @param {number} number - Subnet number (optional)\r\n     * @param {boolean} isRoot - Is this the root node\r\n     * @returns {string} - SVG string\r\n     */\r\n    function drawTreeNode(address, prefix, x, y, width, height, number = null, isRoot = false) {\r\n        const rectX = x - width / 2;\r\n        const fillColor = isRoot ? 'url(#rootGrad)' : 'url(#childGrad)';\r\n        const strokeColor = isRoot ? '#8b5cf6' : '#3b82f6';\r\n        \r\n        let svg = `<rect x=\"${rectX}\" y=\"${y}\" width=\"${width}\" height=\"${height}\" rx=\"12\" \r\n                   class=\"tree-node\" fill=\"${fillColor}\" stroke=\"${strokeColor}\" \r\n                   stroke-width=\"3\" filter=\"url(#shadow)\" />`;\r\n        \r\n        if (number) {\r\n            // Child node with number\r\n            svg += `<rect x=\"${rectX + 5}\" y=\"${y + 5}\" width=\"30\" height=\"20\" rx=\"4\" fill=\"rgba(255,255,255,0.2)\" />`;\r\n            svg += `<text x=\"${rectX + 20}\" y=\"${y + 18}\" text-anchor=\"middle\" class=\"tree-text\" style=\"font-size: 11px; fill: white; font-weight: 700;\">#${number}</text>`;\r\n            svg += `<text x=\"${x}\" y=\"${y + 38}\" text-anchor=\"middle\" class=\"tree-text\" style=\"font-size: 13px; fill: white; font-weight: 700;\">${address}</text>`;\r\n            svg += `<text x=\"${x}\" y=\"${y + 55}\" text-anchor=\"middle\" class=\"tree-text\" style=\"font-size: 12px; fill: rgba(255,255,255,0.9);\">/${prefix}</text>`;\r\n        } else {\r\n            // Root node\r\n            svg += `<text x=\"${x}\" y=\"${y + 20}\" text-anchor=\"middle\" class=\"tree-text\" style=\"font-size: 11px; fill: rgba(255,255,255,0.8); font-weight: 600;\">BASE NETWORK</text>`;\r\n            svg += `<text x=\"${x}\" y=\"${y + 38}\" text-anchor=\"middle\" class=\"tree-text\" style=\"font-size: 14px; fill: white; font-weight: 700;\">${address}</text>`;\r\n            svg += `<text x=\"${x}\" y=\"${y + 55}\" text-anchor=\"middle\" class=\"tree-text\" style=\"font-size: 13px; fill: rgba(255,255,255,0.9);\">/${prefix}</text>`;\r\n        }\r\n        \r\n        return svg;\r\n    }\r\n\r\n    /**\r\n     * Generates address space map visualization\r\n     * @param {Array} subnets - Array of subnet objects\r\n     * @param {string} containerId - Container element ID\r\n     */\r\n    function renderAddressSpaceMap(subnets, containerId) {\r\n        const container = document.getElementById(containerId);\r\n        if (!container) return;\r\n\r\n        if (subnets.length === 0) {\r\n            container.innerHTML = '<p>No subnets to display</p>';\r\n            return;\r\n        }\r\n\r\n        const svgHeight = Math.max(200, subnets.length * 60 + 40);\r\n        const svgWidth = 800;\r\n        const barHeight = 40;\r\n        const barSpacing = 20;\r\n        const leftMargin = 50;\r\n        const rightMargin = 50;\r\n        const availableWidth = svgWidth - leftMargin - rightMargin;\r\n\r\n        // Calculate max address for scaling\r\n        const lastSubnet = subnets[subnets.length - 1];\r\n        const maxAddress = SubnetEngine.ipToInt(lastSubnet.broadcastAddress);\r\n        const minAddress = SubnetEngine.ipToInt(subnets[0].networkAddress);\r\n        const range = maxAddress - minAddress + 1;\r\n\r\n        let svg = `<svg width=\"100%\" height=\"${svgHeight}\" viewBox=\"0 0 ${svgWidth} ${svgHeight}\">`;\r\n\r\n        subnets.forEach((subnet, index) => {\r\n            const y = 20 + index * (barHeight + barSpacing);\r\n            \r\n            // Calculate positions\r\n            const networkInt = SubnetEngine.ipToInt(subnet.networkAddress);\r\n            const broadcastInt = SubnetEngine.ipToInt(subnet.broadcastAddress);\r\n            const firstUsableInt = SubnetEngine.ipToInt(subnet.firstUsable);\r\n            const lastUsableInt = SubnetEngine.ipToInt(subnet.lastUsable);\r\n\r\n            // Calculate widths proportionally\r\n            const totalWidth = availableWidth * (subnet.totalAddresses / range);\r\n            const networkWidth = 3; // Fixed small width for network\r\n            const broadcastWidth = 3; // Fixed small width for broadcast\r\n            const usableWidth = totalWidth - networkWidth - broadcastWidth;\r\n\r\n            const startX = leftMargin;\r\n\r\n            // Draw network address (blue)\r\n            svg += `<rect x=\"${startX}\" y=\"${y}\" width=\"${networkWidth}\" height=\"${barHeight}\" \r\n                    fill=\"var(--color-network)\" rx=\"2\" />`;\r\n\r\n            // Draw usable range (green)\r\n            svg += `<rect x=\"${startX + networkWidth}\" y=\"${y}\" width=\"${usableWidth}\" height=\"${barHeight}\" \r\n                    fill=\"var(--color-usable)\" rx=\"2\" />`;\r\n\r\n            // Draw broadcast address (red)\r\n            svg += `<rect x=\"${startX + networkWidth + usableWidth}\" y=\"${y}\" width=\"${broadcastWidth}\" height=\"${barHeight}\" \r\n                    fill=\"var(--color-broadcast)\" rx=\"2\" />`;\r\n\r\n            // Add border\r\n            svg += `<rect x=\"${startX}\" y=\"${y}\" width=\"${totalWidth}\" height=\"${barHeight}\" \r\n                    fill=\"none\" stroke=\"var(--border-color)\" stroke-width=\"2\" rx=\"2\" />`;\r\n\r\n            // Add labels\r\n            svg += `<text x=\"${startX + totalWidth + 10}\" y=\"${y + barHeight / 2}\" \r\n                    alignment-baseline=\"middle\" class=\"tree-text\" style=\"font-size: 12px;\">\r\n                    Subnet ${index + 1}: ${subnet.networkAddress}/${subnet.prefix}\r\n                    </text>`;\r\n\r\n            // Add hover tooltip (simplified)\r\n            svg += `<title>Subnet ${index + 1}\r\nNetwork: ${subnet.networkAddress}\r\nUsable: ${subnet.firstUsable} - ${subnet.lastUsable}\r\nBroadcast: ${subnet.broadcastAddress}\r\nHosts: ${subnet.usableHosts}</title>`;\r\n        });\r\n\r\n        svg += '</svg>';\r\n        container.innerHTML = svg;\r\n    }\r\n\r\n    /**\r\n     * Generates a color-coded IP address display\r\n     * @param {string} ip - IP address\r\n     * @param {string} type - Type: 'network', 'broadcast', 'usable'\r\n     * @returns {string} - HTML string with color coding\r\n     */\r\n    function colorCodeIP(ip, type) {\r\n        const colors = {\r\n            network: 'var(--color-network)',\r\n            broadcast: 'var(--color-broadcast)',\r\n            usable: 'var(--color-usable)'\r\n        };\r\n        \r\n        return `<span style=\"color: ${colors[type] || 'inherit'}; font-weight: 600;\">${ip}</span>`;\r\n    }\r\n\r\n    /**\r\n     * Creates a visual comparison of two subnets\r\n     * @param {Object} subnet1 - First subnet\r\n     * @param {Object} subnet2 - Second subnet\r\n     * @returns {string} - HTML comparison\r\n     */\r\n    function compareSubnets(subnet1, subnet2) {\r\n        return `\r\n            <div class=\"subnet-comparison\">\r\n                <div class=\"comparison-column\">\r\n                    <h4>Subnet ${subnet1.subnetNumber}</h4>\r\n                    <p>Network: ${colorCodeIP(subnet1.networkAddress, 'network')}</p>\r\n                    <p>Broadcast: ${colorCodeIP(subnet1.broadcastAddress, 'broadcast')}</p>\r\n                    <p>Hosts: ${subnet1.usableHosts}</p>\r\n                </div>\r\n                <div class=\"comparison-column\">\r\n                    <h4>Subnet ${subnet2.subnetNumber}</h4>\r\n                    <p>Network: ${colorCodeIP(subnet2.networkAddress, 'network')}</p>\r\n                    <p>Broadcast: ${colorCodeIP(subnet2.broadcastAddress, 'broadcast')}</p>\r\n                    <p>Hosts: ${subnet2.usableHosts}</p>\r\n                </div>\r\n            </div>\r\n        `;\r\n    }\r\n\r\n    /**\r\n     * Clears all visualizations\r\n     */\r\n    function clearVisualizations() {\r\n        const containers = ['binaryVisualization', 'subnetTree', 'addressMap'];\r\n        containers.forEach(id => {\r\n            const container = document.getElementById(id);\r\n            if (container) {\r\n                container.innerHTML = '';\r\n            }\r\n        });\r\n    }\r\n\r\n    // Public API\r\n    return {\r\n        renderBinaryVisualization,\r\n        renderSubnetTree,\r\n        renderAddressSpaceMap,\r\n        colorCodeIP,\r\n        compareSubnets,\r\n        clearVisualizations\r\n    };\r\n})();\r\n\r\n// Make available globally\r\nwindow.Visualizer = Visualizer;\r\n"]}